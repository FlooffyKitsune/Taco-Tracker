import{r as H,v as J}from"./XUcN7xOl.js";import{w as p,b as A}from"./u0wiUUlS.js";import N from".prisma/client/index-browser";function M(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function B(e,d){e.d(1),d.delete(e.key)}function q(e,d,u,w,y,c,s,h,b,v,l,f){let n=e.length,r=c.length,i=n;const S={};for(;i--;)S[e[i].key]=i;const m=[],x=new Map,U=new Map,j=[];for(i=r;i--;){const t=f(y,c,i),o=u(t);let a=s.get(o);a?j.push(()=>a.p(t,d)):(a=v(o,t),a.c()),x.set(o,m[i]=a),o in S&&U.set(o,Math.abs(i-S[o]))}const O=new Set,R=new Set;function T(t){J(t,1),t.m(h,l),s.set(t.key,t),l=t.first,r--}for(;n&&r;){const t=m[r-1],o=e[n-1],a=t.key,g=o.key;t===o?(l=t.first,n--,r--):x.has(g)?!s.has(a)||O.has(a)?T(t):R.has(g)?n--:U.get(a)>U.get(g)?(R.add(a),T(t)):(O.add(g),n--):(b(o,s),n--)}for(;n--;){const t=e[n];x.has(t.key)||b(t,s)}for(;r;)T(m[r-1]);return H(j),m}const D=p("calculator"),F=p(!1),I=p(null),G=p([]),X=p(!1),k=N;var C=k;const P=globalThis,$=P.prisma??new C.PrismaClient;JSON.stringify({type:"total_tacos",value:1}),JSON.stringify({type:"total_tacos",value:5}),JSON.stringify({type:"unique_types",value:3}),JSON.stringify({type:"sessions_joined",value:1}),JSON.stringify({type:"total_tacos",value:25}),JSON.stringify({type:"all_types"}),JSON.stringify({type:"total_tacos",value:50}),JSON.stringify({type:"unique_days",value:7}),JSON.stringify({type:"total_tacos",value:100}),JSON.stringify({type:"session_exact_tacos",value:13});async function Y(e){return await $.userAchievement.findMany({where:{userId:e},include:{achievement:!0},orderBy:{unlockedAt:"desc"}})}function W(e){switch(e){case"consumption":return"bg-orange-100 text-orange-800";case"social":return"bg-blue-100 text-blue-800";case"streak":return"bg-green-100 text-green-800";case"special":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}}function z(e){return e>=500?"text-purple-600":e>=200?"text-yellow-600":e>=100?"text-orange-600":e>=50?"text-blue-600":"text-gray-600"}async function K(e,d,u){const{callbackUrl:w,...y}={},{redirect:c=!0,redirectTo:s=w??window.location.href,...h}=y,v=`${A??""}/auth/signin/${e}`,l=await fetch(`${v}?${new URLSearchParams(u)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...h,callbackUrl:s})}),f=await l.json();if(c){const i=f.url??s;window.location.href=i,i.includes("#")&&window.location.reload();return}const n=new URL(f.url).searchParams.get("error")??void 0,r=new URL(f.url).searchParams.get("code")??void 0;return{error:n,code:r,status:l.status,ok:l.ok,url:n?null:f.url}}async function Q(e){const{redirect:d=!0,redirectTo:u=window.location.href}={},c=await(await fetch(`${A??""}/auth/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({callbackUrl:u})})).json();if(d){const s=c.url??u;window.location.href=s,s.includes("#")&&window.location.reload();return}return c}export{K as a,D as b,I as c,X as d,M as e,F as f,W as g,B as h,z as i,Y as j,G as n,Q as s,q as u};
